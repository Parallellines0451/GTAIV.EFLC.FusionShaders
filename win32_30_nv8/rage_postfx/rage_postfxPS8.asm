// Summary: Scalable bloom
// Generated by Microsoft (R) HLSL Shader Compiler 9.26.952.2844
//
// Parameters:
//
//   sampler2D HDRSampler;
//   float4 TexelSize;
//   float4 globalScreenSize;
//
//
// Registers:
//
//   Name               Reg   Size
//   ------------------ ----- ----
//   globalScreenSize   c44      1
//   TexelSize          c66      1
//   HDRSampler         s0       1
//

    ps_3_0
    def c219, 1.8395173895e+25, 3.9938258725e+24, 4.5435787456e+30, 1.1364530546e-42 // 811
    // https://observablehq.com/@jobleonard/gaussian-kernel-calculater
    def c0, 0.09043987558157364, 0.08342331057487526, 0.07291734780749201, 0.06039368393189297 // 4.3 sigma
    def c1, 0.0473991386808906, 0.03525066121688894, 0.024841674758290057, 0.016588619577573006
    def c2, 0.010496752439822546, 0.006293833998248673, 0.003575956393107322, 0.0019252505598539797
    def c3, 1, 2, 3, 0
    def c4, 4, 5, 6, 0
    def c5, 7, 8, 9, 0
    def c6, 10, 11, 12, 0
    def c7, 0.0018518, 0.09290778895898182, 0, 0
    def c8, 0.2932482044098259, 0.22394306564588196, 0.09969501558123543, 0.025843481100711958 // 1.33 sigma
    def c9, 0.003894335467257663, 0, 0, 0
    dcl_texcoord v0.xy
    dcl_2d s0
    mul r1.xy, c44.yy, c44.zw
    mul r1.xy, r1.xy, c7.x
    
    // smaller center blur
    
    mad r2.xy, r1.xy, c3.wx, v0.xy
    texld r3.xyz, r2, s0
    mad r2.xy, r1.xy, -c3.wx, v0.xy
    texld r4.xyz, r2, s0
    mad r2.xy, r1.xy, c3.wy, v0.xy
    texld r5.xyz, r2, s0
    mad r2.xy, r1.xy, -c3.wy, v0.xy
    texld r6.xyz, r2, s0
    mad r2.xy, r1.xy, c3.wz, v0.xy
    texld r7.xyz, r2, s0
    mad r2.xy, r1.xy, -c3.wz, v0.xy
    texld r8.xyz, r2, s0
    mad r2.xy, r1.xy, c4.wx, v0.xy
    texld r9.xyz, r2, s0
    mad r2.xy, r1.xy, -c4.wx, v0.xy
    texld r2.xyz, r2, s0
    
    texld r10, v0, s0 // center sample
    
    mul r0, r10, c8.x
    mad r0, r3, c8.y, r0
    mad r0, r4, c8.y, r0
    mad r0, r5, c8.z, r0
    mad r0, r6, c8.z, r0
    mad r0, r7, c8.w, r0
    mad r0, r8, c8.w, r0
    mad r0, r9, c9.x, r0
    mad r0, r2, c9.x, r0
    
    // subtract center blur from each sample
    
    add r3.xyz, r3, -r0
    max r3.xyz, r3, c7.w
    mul r3.xyz, r3, c0.x
    
    add r4.xyz, r4, -r0
    max r4.xyz, r4, c7.w
    mad r3.xyz, r4, c0.x, r3
    
    add r4.xyz, r5, -r0
    max r4.xyz, r4, c7.w
    mad r3.xyz, r4, c0.y, r3
    
    add r4.xyz, r6, -r0
    max r4.xyz, r4, c7.w
    mad r3.xyz, r4, c0.y, r3
    
    add r4.xyz, r7, -r0
    max r4.xyz, r4, c7.w
    mad r3.xyz, r4, c0.z, r3
    
    add r4.xyz, r8, -r0
    max r4.xyz, r4, c7.w
    mad r3.xyz, r4, c0.z, r3
    
    add r4.xyz, r9, -r0
    max r4.xyz, r4, c7.w
    mad r3.xyz, r4, c0.w, r3
    
    add r4.xyz, r2, -r0
    max r4.xyz, r4, c7.w
    mad r3.xyz, r4, c0.w, r3
    
    add r4.xyz, r10, -r0
    max r4.xyz, r4, c7.w
    mad r3.xyz, r4, c7.y, r3 // also include center sample, unlike vanilla
    
    mad r2.xy, r1.xy, c4.wy, v0.xy
    texld r2.xyz, r2, s0
    add r2.xyz, r2, -r0
    max r2.xyz, r2, c7.w
    mad r3.xyz, r2, c1.x, r3
    mad r2.xy, r1.xy, -c4.wy, v0.xy
    texld r2.xyz, r2, s0
    add r2.xyz, r2, -r0
    max r2.xyz, r2, c7.w
    mad r3.xyz, r2, c1.x, r3
    mad r2.xy, r1.xy, c4.wz, v0.xy
    texld r2.xyz, r2, s0
    add r2.xyz, r2, -r0
    max r2.xyz, r2, c7.w
    mad r3.xyz, r2, c1.y, r3
    mad r2.xy, r1.xy, -c4.wz, v0.xy
    texld r2.xyz, r2, s0
    add r2.xyz, r2, -r0
    max r2.xyz, r2, c7.w
    mad r3.xyz, r2, c1.y, r3
    mad r2.xy, r1.xy, c5.wx, v0.xy
    texld r2.xyz, r2, s0
    add r2.xyz, r2, -r0
    max r2.xyz, r2, c7.w
    mad r3.xyz, r2, c1.z, r3
    mad r2.xy, r1.xy, -c5.wx, v0.xy
    texld r2.xyz, r2, s0
    add r2.xyz, r2, -r0
    max r2.xyz, r2, c7.w
    mad r3.xyz, r2, c1.z, r3
    mad r2.xy, r1.xy, c5.wy, v0.xy
    texld r2.xyz, r2, s0
    add r2.xyz, r2, -r0
    max r2.xyz, r2, c7.w
    mad r3.xyz, r2, c1.w, r3
    mad r2.xy, r1.xy, -c5.wy, v0.xy
    texld r2.xyz, r2, s0
    add r2.xyz, r2, -r0
    max r2.xyz, r2, c7.w
    mad r3.xyz, r2, c1.w, r3
    
    mad r2.xy, r1.xy, c5.wz, v0.xy
    texld r2.xyz, r2, s0
    add r2.xyz, r2, -r0
    max r2.xyz, r2, c7.w
    mad r3.xyz, r2, c2.x, r3
    mad r2.xy, r1.xy, -c5.wz, v0.xy
    texld r2.xyz, r2, s0
    add r2.xyz, r2, -r0
    max r2.xyz, r2, c7.w
    mad r3.xyz, r2, c2.x, r3
    mad r2.xy, r1.xy, c6.wx, v0.xy
    texld r2.xyz, r2, s0
    add r2.xyz, r2, -r0
    max r2.xyz, r2, c7.w
    mad r3.xyz, r2, c2.y, r3
    mad r2.xy, r1.xy, -c6.wx, v0.xy
    texld r2.xyz, r2, s0
    add r2.xyz, r2, -r0
    max r2.xyz, r2, c7.w
    mad r3.xyz, r2, c2.y, r3
    mad r2.xy, r1.xy, c6.wy, v0.xy
    texld r2.xyz, r2, s0
    add r2.xyz, r2, -r0
    max r2.xyz, r2, c7.w
    mad r3.xyz, r2, c2.z, r3
    mad r2.xy, r1.xy, -c6.wy, v0.xy
    texld r2.xyz, r2, s0
    add r2.xyz, r2, -r0
    max r2.xyz, r2, c7.w
    mad r3.xyz, r2, c2.z, r3
    mad r2.xy, r1.xy, c6.wz, v0.xy
    texld r2.xyz, r2, s0
    add r2.xyz, r2, -r0
    max r2.xyz, r2, c7.w
    mad r3.xyz, r2, c2.w, r3
    mad r2.xy, r1.xy, -c6.wz, v0.xy
    texld r2.xyz, r2, s0
    add r2.xyz, r2, -r0
    max r2.xyz, r2, c7.w
    mad r3.xyz, r2, c2.w, r3
    
    add oC0.xyz, r3, r0
    mov oC0.w, c7.w

// approximately 40 instruction slots used (7 texture, 33 arithmetic)
