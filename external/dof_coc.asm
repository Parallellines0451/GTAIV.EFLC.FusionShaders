// Depth of field circle of confusion pass
// Generated by Microsoft (R) HLSL Shader Compiler 9.26.952.2844
//
// Parameters:
//
//   float4 NearFarPlane;
//   sampler2D GBufferTextureSampler3;
//   sampler2D HDRSampler;
//   sampler2D DOFBlurSampler;
//   float4 TexelSize;
//   float4 dofBlur;
//   float4 dofDist;
//   float4 dofProj;
//
//
// Registers:
//
//   Name                         Reg   Size
//   ---------------------------- ----- ----
//   NearFarPlane                 c128     1
//   TexelSize                    c76      1
//   dofProj                      c77      1
//   dofDist                      c78      1
//   dofBlur                      c79      1
//   GBufferTextureSampler3       s1       1
//   HDRSampler                   s2       1
//   DOFBlurSampler               s8       1
//

    ps_3_0
    def c1, 0, 0.212500006, 0.715399981, 0.0720999986
    def c2, 0.25, 1, 0.5, 0
    def c4, -0.5, -1.5, 1.5, 0.5
    def c5, 1e-6, 0, 0, 0
    
    dcl_texcoord v0.xy
    dcl_texcoord1 v1.xyz
    dcl_2d s1
    dcl_2d s2
    dcl_2d s8
    texld r0, v0, s1
    
    // LogDepth Read
    pow r19.x, c209.z, r0.x
    mul r0.y, r19.x, c209.w
    
    if_ne -c210_abs.y, c210_abs.y // make depth of field radial alongside fog
      mad r20.xyz, v1, -r0.y, c5.x
      dp3 r20.x, r20, r20
      rsq r20.x, r20.x
      rcp r0.y, r20.x
    endif
    
    mov r3, c4
    texld r7.xyz, v0, s2
    
    add r1.w, -r0.y, c78.w // cutscene
    mad r1.w, c78.y, -r3.w, r1.w // cutscene
    max r2.w, r1.w, c1.x // cutscene
    add r0.x, r0.y, -c78.w
    mad r0.x, c78.y, -r3.w, r0.x
    max r1.w, r0.x, c1.x
    rcp r0.x, c78.x // cutscene
    mul r0.x, r2.w, r0.x // cutscene
    lrp r2.w, r0.x, c79.x, c79.y // cutscene
    min r0.x, c79.x, r2.w // cutscene
    rcp r0.z, c78.z
    mul r0.z, r1.w, r0.z
    lrp r1.w, r0.z, c79.z, c79.y
    min r0.z, c79.z, r1.w
    max r0.z, r0.x, r0.z // cutscene
    mul r1.w, r0.z, r0.z
    
    mov r0.xy, c76
    mad r0.xy, r0.xy, c4.w, v0.xy // fix pixel offset
    
    // fill kernel gaps
    
    mad r4, c76.xyxy, r3.xyzx, r0.xyxy
    mad r6, c76.xyxy, r3.wzyw, r0.xyxy
    texld r3.xyz, r4.xy, s8
    texld r4.xyz, r4.zw, s8
    texld r5.xyz, r6.xy, s8
    texld r6.xyz, r6.zw, s8
    add r2.xyz, r3, r4
    add r2.xyz, r2, r5
    add r2.xyz, r2, r6
    mul r2.xyz, r2, c2.x
    
    add r3.xyz, r3, -r2
    max r3.xyz, r3, c1.x
    
    add r4.xyz, r4, -r2
    max r4.xyz, r4, c1.x
    add r3.xyz, r3, r4
    
    add r5.xyz, r5, -r2
    max r5.xyz, r5, c1.x
    add r3.xyz, r3, r5
    
    add r6.xyz, r6, -r2
    max r6.xyz, r6, c1.x
    add r3.xyz, r3, r6
    
    mad r3.xyz, r3, c2.x, r2
    lrp oC0.xyz, r1.w, r3, r7
    mov oC0.w, c2.y

// approximately 176 instruction slots used (14 texture, 162 arithmetic)
